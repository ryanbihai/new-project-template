# 项目开发指南 (Project Guide)

欢迎加入 **体检与核保 Bot 2.0** 项目。本文件作为项目的核心索引，帮助你快速了解项目结构、常用命令及开发规范。

## 1. 项目地图 (Project Map)

快速定位核心模块与文档：

- **`frontend/`**: 前端项目目录
  - 技术栈：Vue 3 (Composition API) + Tailwind CSS + Vant
  - 核心入口：`src/main.js`, `src/App.vue`
- **`core/`**: 后端核心业务逻辑
  - `RecommendEngine.js`: 推荐引擎核心
  - `Workflow.js`: 工作流控制
  - `Bot2SysService.js`: 对接外部系统服务
- **`skills/`**: 技能模块 (Skill-based Architecture)
  - 每个子目录代表一个独立技能，包含逻辑与配置
- **`shared/`**: 共享模块
  - `base/`: 技能基类 (BaseSkill, EnhancedBaseSkill)
  - `utils/`: 通用工具 (CardGenerator)
- **`config/`**: 全局配置
  - `intent_to_workflow.json`: 意图映射
  - `orchestration_policy.json`: 编排策略
- **`resources/`**: 静态资源
  - `dictionary/`: 业务字典
  - `knowledge/`: 知识库文件
- **`doc/`**: 项目文档库
  - **核心架构**:
    - [Bot2.0核心交互架构与解耦设计文档](doc/Bot2.0核心交互架构与解耦设计文档.md)
    - [Bot2.0 客户数据旅程](doc/Bot2.0%20客户数据旅程.md)
    - [Bot2.0前端对接与流式交互集成方案](doc/Bot2.0前端对接与流式交互集成方案.md)
  - **接口文档**:
    - [Bot聚合推荐接口](doc/接口文档/bot获取推荐项目接口文档.md) (Bot侧调用)
    - [底层推荐接口](doc/接口文档/个人体检项目推荐底层接口.md) (底层引擎接口)
    - [Bot2Sys对接文档](doc/接口文档/bot2sys与后端客户信息&体检信息对接.md)
    - [Bot页面API](doc/接口文档/bot页面API.md)
    - [代码固化指南](doc/接口文档/代码固化指南%20-%20个人信息与体检报告加载(严格模式).md)
  - **设计文档**:
    - [通用交互卡片设计方案](doc/设计文档/通用交互卡片设计方案.md)
    - [思考过程体验优化设计](doc/设计文档/思考过程体验优化设计.md)
    - [结构化日志Schema](doc/设计文档/structured_log_schema.md)
  - **业务逻辑**:
    - [意图识别与交互体系](doc/上下文压缩和意图识别/好啦管家全业务意图识别与交互体系详解%20V5.0.md)
  - **指南**:
    - [如何启动](doc/如何启动.md)
    - [README](doc/README.md)
  - **开发规范**:
    - [SKILL优化指引](SKILL优化指引.md)
    - [项目开发规则与最佳实践](项目开发规则与最佳实践.md)
- **`scripts/`**: 工具脚本与测试脚本
- **`bridge/`**: LLM 客户端连接层
- **`middleware/`**: 中间件适配层
- **`server_unified.js`**: 后端服务统一入口

## 2. 操作快捷键 (Common Commands)

请使用以下命令进行项目的构建与运行，避免环境不一致。

### 环境安装
- **安装所有依赖** (前端+后端):
  ```bash
  npm run all:install
  ```
- **仅安装前端依赖**:
  ```bash
  npm run frontend:install
  ```

### 启动开发
- **一键启动所有服务** (推荐):
  ```bash
  npm run dev
  ```
  *这将同时启动后端服务 (Node.js) 和前端开发服务器 (Vite)*

- **仅启动前端**:
  ```bash
  npm run dev:frontend
  ```

- **仅启动后端**:
  ```bash
  npm run dev:server
  ```

## 3. 全局协作法则 (Vibe Coding)

本项目遵循 **Vibe Coding** 协作模式，请严格遵守以下原则：

1.  **谋定而后动 (Plan First)**
    - 在编写代码前，必须先分析需求、设计方案并获得确认。
    - 禁止盲目修改核心逻辑。

2.  **小步快跑 (Step-by-Step)**
    - 将复杂任务拆解为小模块。
    - "写一块，测一块"，确保每一步都是稳健的。

3.  **自我测试 (Proactive Testing)**
    - 交付前必须进行自测，覆盖正常流程与异常边界。
    - 使用 `scripts/` 下的测试脚本辅助验证。

4.  **语言规范**
    - 全程使用 **中文** 进行注释与沟通。
    - 变量命名使用清晰的英文（如 `userProfile` 而非 `u`）。

## 4. 技术栈规范 (Tech Stack)

- **前端**: Vue 3 (Script Setup), Tailwind CSS (Utility-first), Vant UI
- **后端**: Node.js (CommonJS), Express
- **AI 交互**: 必须通过 `skills/` 目录下的技能模块进行扩展，严禁在 `core/` 中硬编码新的业务逻辑。
